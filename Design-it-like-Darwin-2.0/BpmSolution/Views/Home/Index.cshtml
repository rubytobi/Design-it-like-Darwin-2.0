<script>
    reloadInterval = 3000;
</script>
<div class="jumbotron">
    <h1>Design it like Darwin 2.0 - Evolutionary Process Redesign</h1>
    <p class="lead">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
    <p><a href="https://bpm2017.cs.upc.edu/" class="btn btn-success btn-lg">BPM Conference 2017 &raquo;</a>&nbsp;<a href="https://www.fim-rc.de" class="btn btn-danger btn-lg">FIM Research Center &raquo;</a></p>
</div>
<div class="row">
    <div class="col-md-3">
        <h2>Controlls</h2>
        <p>
            <input id="controlStart" class="btn btn-success" type="button" disabled value="Start" />
            <input id="controlPause" class="btn btn-warning" type="button" disabled value="Pause" />
            <input id="controlStop" class="btn btn-danger" type="button" disabled value="Stop" />
            <script>
                $(function () {
                    setInterval(function () {
                        $.ajax({
                            url: '/api/status',
                            type: 'GET',
                            success: function (data) {
                                if (data.Ready) {
                                    $("#controlStart").prop("disabled", false);
                                    $("#controlPause").prop("disabled", true);
                                    $("#controlStop").prop("disabled", true);
                                } else if (data.Running && !data.StopRequested) {
                                    $("#controlStart").prop("disabled", true);
                                    $("#controlPause").prop("disabled", true);
                                    $("#controlStop").prop("disabled", false);
                                } else if (data.Running && data.StopRequested) {
                                    $("#controlStart").prop("disabled", true);
                                    $("#controlPause").prop("disabled", true);
                                    $("#controlStop").prop("disabled", true);
                                } else if (data.Stopped) {
                                    $("#controlStart").prop("disabled", false);
                                    $("#controlPause").prop("disabled", true);
                                    $("#controlStop").prop("disabled", true);
                                }
                            }
                        });
                    }, reloadInterval);
                });

                function emptyArray(array) {
                    while (array.size > 0) {
                        array.pop();
                    }
                };

                $(function () {
                    $("#controlStart").click(function () {
                        $.ajax({
                            url: "/api/start",
                            type: "GET",
                            success: function () {
                                emptyArray(vLabelsMaxFitness);
                                emptyArray(vDataMaxFitness);
                                chartMaxFitness.update();

                                emptyArray(vLabelsFitness);
                                emptyArray(vAvgDataFitness);
                                emptyArray(vMaxDataFitness);
                                emptyArray(vMinDataFitness);
                                chartFitness.update();

                                emptyArray(vLabelsRuntime);
                                emptyArray(vAvgDataRuntime);
                                emptyArray(vMinDataRuntime);
                                emptyArray(vMaxDataRuntime);
                                chartRuntime.update();

                                emptyArray(vLabelsValidGenomes);
                                emptyArray(vDataValidGenomes);
                                chartValidGenomes.update();
                            }
                        });
                    });
                    $("#controlPause").click(function () {
                        $.ajax({ url: "/api/pause", type: "GET" });
                    });
                    $("#controlStop").click(function () {
                        $.ajax({ url: "/api/stop", type: "GET" });
                    });
                })
            </script>
        </p>
    </div>
    <div class="col-md-6">
        <h2>Status</h2>
        <div id="divStatus">&nbsp;</div>
        <script>
            $(function () {
                setInterval(function () { $('#divStatus').load('/api/status'); }, reloadInterval); // every 0.5 sec
            });
        </script>
    </div>
    <div class="col-md-3">
        <h2>Import / Export</h2>
        <p><button type="button" class="btn btn-info disabled">Upload</button></p>
        <p><button type="button" class="btn btn-info disabled">Download</button></p>
        <p><button id="loadDummyData" type="button" class="btn btn-info">Load Dummy Data</button></p>
        <script>
            $(function () {
                $('#loadDummyData').click(function () {
                    $.ajax({
                        url: "/api/dummydata",
                        type: "POST"
                    });
                });
            });
        </script>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#tabData">Data</a></li>
            <li><a data-toggle="tab" href="#tabSettings">Settings</a></li>
            <li><a data-toggle="tab" href="#tabAnalytics">Analytics</a></li>
        </ul>
    </div>
</div>
<div class="tab-content">
    <div class="tab-pane fade" id="tabSettings">
        <div class="row">
            @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formAlgorithmSettings" }))
            {
                @Html.AntiForgeryToken()

                <div class="form-horizontal">
                    <h2>Algorithm Settings</h2>
                    <div class="form-group">
                        <label class="control-label col-md-7" for="CrossoverProbability">Crossover Probability</label>
                        <div class="col-md-3">
                            <input id="CrossoverProbability" class="form-control" type="text" pattern="\d+(.\d{2})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="InitialGenome">Initial Genome</label>
                        <div class="col-md-3">
                            <input id="InitialGenome" class="form-control" type="text" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="MaximumNumberOfGenerations">Maximum Number of Generations</label>
                        <div class="col-md-3">
                            <input id="MaximumNumberOfGenerations" class="form-control" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="MutationProbability">Mutation Probability</label>
                        <div class="col-md-3">
                            <input id="MutationProbability" class="form-control" type="text" pattern="\d+(.\d{2})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="PopulationSize">Population Size</label>
                        <div class="col-md-3">
                            <input id="PopulationSize" class="form-control" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="Seed">Seed</label>
                        <div class="col-md-3">
                            <input id="Seed" class="form-control" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="TournamentSize">Tournament Size</label>
                        <div class="col-md-3">
                            <input id="TournamentSize" class="form-control" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-7">
                            <div id="resultAlgorithmSettings"></div>
                            <input type="submit" id="submitAlgorithmSettings" value="Create" class="btn btn-info" />
                            <input type="button" id="defaultAlgorithmSettings" value="Default" class="btn btn-warning" />
                        </div>
                    </div>
                </div>
                <script>
                    function loadDefaultAlgorithmSettings() {
                        $.ajax({
                            url: "/api/settings/algorithm",
                            type: "GET",
                            success: function (data) {
                                $('#CrossoverProbability').val(data.CrossoverProbability);
                                $('#InitialGenome').val(data.InitialGenome);
                                $('#MaximumNumberOfGenerations').val(data.MaximumNumberOfGenerations);
                                $('#MutationProbability').val(data.MutationProbability);
                                $('#PopulationSize').val(data.PopulationSize);
                                $('#Seed').val(data.Seed);
                                $('#TournamentSize').val(data.TournamentSize);
                            }
                        });
                    }

                    $(document).ready(function () {
                        loadDefaultAlgorithmSettings();
                    });

                    $('#defaultAlgorithmSettings').click(function () {
                        loadDefaultAlgorithmSettings();
                        return false;
                    });

                    $(function () {
                        $('#formAlgorithmSettings').submit(function () {
                            if ($(this).valid()) {

                                var model = new Object();
                                model.CrossoverProbability = $('#CrossoverProbability').val();
                                model.InitialGenome = $('#InitialGenome').val();
                                model.MaximumNumberOfGenerations = $('#MaximumNumberOfGenerations').val();
                                model.MutationProbability = $('#MutationProbability').val();
                                model.PopulationSize = $('#PopulationSize').val();
                                model.Seed = $('#Seed').val();
                                model.TournamentSize = $('#TournamentSize').val();

                                $.ajax({
                                    url: "/api/settings/algorithm",
                                    type: "POST",
                                    data: model,
                                    success: function () {
                                        $("#resultAlgorithmSettings").html("<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>");
                                    },
                                    error: function (data) {
                                        $("#resultAlgorithmSettings").html("<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>");
                                    }
                                })

                            }

                            return false;
                        });
                    });

                </script>
            }
        </div>
        <div class="row">
            @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formBpmSettings" }))
            {
                @Html.AntiForgeryToken()

                <div class="form-horizontal">
                    <h2>Bpm Settings</h2>
                    <div class="form-group">
                        <label class="control-label col-md-7" for="CostWeight">Cost Weight</label>
                        <div class="col-md-3">
                            <input class="form-control" id="CostWeight" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="TimeWeight">Time Weight</label>
                        <div class="col-md-3">
                            <input class="form-control" id="TimeWeight" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="Alpha">Alpha</label>
                        <div class="col-md-3">
                            <input class="form-control" id="Alpha" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="I">I</label>
                        <div class="col-md-3">
                            <input class="form-control" id="I" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="Ifix">Ifix</label>
                        <div class="col-md-3">
                            <input class="form-control" id="Ifix" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="Ivar">Ivar</label>
                        <div class="col-md-3">
                            <input class="form-control" id="Ivar" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="MaxDepthRandomGenome">Max Depth Random Genome</label>
                        <div class="col-md-3">
                            <input class="form-control" id="MaxDepthRandomGenome" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="N">N</label>
                        <div class="col-md-3">
                            <input class="form-control" id="N" type="text" pattern="\d+(.\d{1,4})?" required="required" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="OnlyValidSolutions">Only Valid Solutions</label>
                        <div class="col-md-3">
                            <div class="checkbox">
                                <input class="form-control" id="OnlyValidSolutions" type="checkbox" checked data-toggle="toggle" data-onstyle="success" data-offstyle="danger">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="OnlyValidSolutionsAtStart">Only Valid Solutions At Start</label>
                        <div class="col-md-3">
                            <div class="checkbox">
                                <input class="form-control" id="OnlyValidSolutionsAtStart" type="checkbox" checked data-toggle="toggle" data-onstyle="success" data-offstyle="danger">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="PainFactor">Pain Factor</label>
                        <div class="col-md-3">
                            <input class="form-control" id="PainFactor" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="PopulationMultiplicator">Population Multiplicator</label>
                        <div class="col-md-3">
                            <input class="form-control" id="PopulationMultiplicator" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-7" for="T">T</label>
                        <div class="col-md-3">
                            <input class="form-control" id="T" type="number" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-7">
                            <div id="resultBpmSetting"></div>
                            <input type="submit" id="submitBpmSettings" value="Create" class="btn btn-info" />
                            <input type="button" id="defaultBpmSettings" value="Default" class="btn btn-warning" />
                        </div>
                    </div>
                </div>
                <script>
                    function loadDefaultBpmSettings() {
                        $.ajax({
                            url: "/api/settings/bpm",
                            type: "GET",
                            success: function (data) {
                                $('#TimeWeight').val(data.TimeWeight);
                                $('#CostWeight').val(data.CostWeight);
                                $('#Alpha').val(data.Alpha);
                                $('#I').val(data.I);
                                $('#Ifix').val(data.Ifix);
                                $('#Ivar').val(data.Ivar);
                                $('#T').val(data.T);
                                $('#N').val(data.N);
                                $('#MaxDepthRandomGenome').val(data.MaxDepthRandomGenome);
                                $('#PainFactor').val(data.PainFactor);
                                $('#PopulationMultiplicator').val(data.PopulationMultiplicator);

                                if (data.OnlyValidSolutions) {
                                    $('#OnlyValidSolutions').bootstrapToggle("on");
                                } else {
                                    $('#OnlyValidSolutions').bootstrapToggle("off");
                                }

                                if (data.OnlyValidSolutionsAtStart) {
                                    $('#OnlyValidSolutionsAtStart').bootstrapToggle("on");
                                } else {
                                    $('#OnlyValidSolutionsAtStart').bootstrapToggle("off");
                                }
                            }
                        });
                    }

                    $(document).ready(function () {
                        loadDefaultBpmSettings();
                    });

                    $(function () {
                        $('#defaultBpmSettings').click(function () {
                            return false;
                        });
                    });

                    $(function () {
                        $('#formBpmSettings').submit(function () {
                            if ($(this).valid()) {

                                var model = new Object();
                                model.CostWeight = $('#CostWeight').val();
                                model.TimeWeight = $('#TimeWeight').val();
                                model.Alpha = $('#Alpha').val();
                                model.I = $('#I').val();
                                model.Ifix = $('#Ifix').val();
                                model.Ivar = $('#Ivar').val();
                                model.T = $('#T').val();
                                model.N = $('#N').val();
                                model.MaxDepthRandomGenome = $('#MaxDepthRandomGenome').val();
                                model.OnlyValidSolutions = $('#OnlyValidSolutions').bootstrapToggle('state')[0].checked;
                                model.OnlyValidSolutionsAtStart = $('#OnlyValidSolutionsAtStart').bootstrapToggle('state')[0].checked;
                                model.PainFactor = $('#PainFactor').val();
                                model.PopulationMultiplicator = $('#PopulationMultiplicator').val();

                                $.ajax({
                                    url: "/api/settings/bpm",
                                    type: "POST",
                                    data: model,
                                    success: function () {
                                        $("#resultBpmSettings").html("<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>");
                                    },
                                    error: function (data) {
                                        $("#resultBpmSettings").html("<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>");
                                    }
                                });
                            }
                            return false;
                        });
                    });
                </script>
            }
        </div>
    </div>
    <div id="tabAnalytics" class="tab-pane fade">
        <div class="row">
            <div class="col-md-12">
                <h2>Population Evolver Progress</h2>
                <div class="progress">
                    <div class="progress-bar progress-bar-striped active" role="progressbar"
                         aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                        0/0
                    </div>
                </div>
                <script>
                    $(function () {
                        setInterval(function () {
                            $.ajax({
                                url: "/api/evolver",
                                type: "GET",
                                success: function (data) {
                                    var $progressBar = $('.progress-bar');
                                    $progressBar.css('width', (data.current / data.max) * 100 + '%');
                                    $progressBar.html(data.current + "/" + data.max);
                                }
                            });
                        }, reloadInterval);
                    });

                </script>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <h2>Best Solution</h2>
                <div id="canvas" style="width: 100%; height: 500px"></div>
                <script>
                    // create viewer
                    BpmnViewer = window.BpmnJS;
                    var bpmnViewer = new BpmnViewer({
                        container: '#canvas'
                    });

                    $(function () {
                        setInterval(function () {
                            var xhr = new XMLHttpRequest();

                            xhr.onreadystatechange = function () {
                                if (xhr.readyState === 4) {
                                    bpmnViewer.importXML(xhr.response);

                                    var canvas = bpmnViewer.get('canvas');
                                    // zoom to fit full viewport
                                    canvas.zoom('fit-viewport');
                                }
                            };

                            xhr.open('GET', '/api/analytics/bestsolution', true);
                            xhr.setRequestHeader("Accept", "application/xml");
                            xhr.send(null);
                        }, reloadInterval);
                    });
                </script>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h2>Max Fitness</h2>
                <canvas id="chartMaxFitness" width="400" height="400"></canvas>
                <script>
                    var vLabelsMaxFitness = [];
                    var vDataMaxFitness = [];

                    var ctxMaxFitness = document.getElementById("chartMaxFitness");
                    var chartMaxFitness = new Chart(ctxMaxFitness, {
                        type: 'line',
                        data: {
                            labels: vLabelsMaxFitness,
                            datasets: [{
                                label: 'Maximum Fitness Value of each Generation',
                                data: vDataMaxFitness,
                                borderColor: "#5cb85c",
                                borderWidth: 1
                            }]
                        },
                        options: {
                        }
                    });

                    $(function () {
                        setInterval(function () {
                            $.getJSON("/api/analytics/fitness/".concat(vDataMaxFitness.length), function (data) {
                                if (data["max"].length > 0) {
                                    data["max"].forEach(function (item) { vLabelsMaxFitness.push(vLabelsRuntime.length); vDataMaxFitness.push(item); });
                                    chartMaxFitness.update();
                                }
                            });
                        }, reloadInterval);
                    });
                </script>
            </div>
            <div class="col-md-6">
                <h2>Top Solutions</h2>
                <table id="tableTopSolutions" class="table table-hover">
                    <thead>
                        <tr>
                            <th>Fitness</th>
                            <th>Process</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <script>
                    $(function () {
                        setInterval(function () {
                            $.getJSON({
                                url: '/api/analytics/topsolutions',
                                type: "GET",
                                success: function (data) {
                                    if (data == null || data.length == 0 || data[0] == null) {
                                        return;
                                    }

                                    $('#tableTopSolutions tbody').empty();

                                    data.forEach(function (item) {
                                        item.Process = item.Process.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                                        $('#tableTopSolutions tbody')
                                            .append('<tr><td>' + item.Fitness + '</td><td>' + item.Process + '</td></tr>');
                                    })
                                }
                            });
                        }, reloadInterval); // every 3 sec
                    });
                </script>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h2>Runtime</h2>
                <canvas id="chartRuntime" width="400" height="400"></canvas>
                <script>
                    var vLabelsRuntime = [];
                    var vMaxDataRuntime = [];
                    var vMinDataRuntime = [];
                    var vAvgDataRuntime = [];

                    var ctxRuntime = document.getElementById("chartRuntime");
                    var chartRuntime = new Chart(ctxRuntime, {
                        type: 'line',
                        data: {
                            labels: vLabelsRuntime,
                            datasets: [{
                                label: 'max runtime',
                                data: vMaxDataRuntime,
                                borderColor: "#CE93D8",
                                borderWidth: 1
                            }, {
                                label: 'min runtime',
                                data: vMinDataRuntime,
                                borderColor: "#4A148C",
                                borderWidth: 1
                            }, {
                                label: 'avg runtime',
                                data: vAvgDataRuntime,
                                borderColor: "#9C27B0",
                                borderWidth: 1
                            }]
                        },
                        options: {
                        }
                    });

                    $(function () {
                        setInterval(function () {
                            $.getJSON("/api/analytics/runtime/".concat(vAvgDataRuntime.length), function (data) {
                                if (data["avg"].length > 0) {
                                    data["avg"].forEach(function (item) { vLabelsRuntime.push(vLabelsRuntime.length); vAvgDataRuntime.push(item); });
                                    data["min"].forEach(function (item) { vMinDataRuntime.push(item); });
                                    data["max"].forEach(function (item) { vMaxDataRuntime.push(item); });
                                    chartRuntime.update();
                                }
                            });
                        }, reloadInterval);
                    });
                </script>
            </div>
            <div class="col-md-6">
                <h2>Valide Genomes</h2>
                <canvas id="chartValidGenomes" width="400" height="400"></canvas>
                <script>
                    var vLabelsValidGenomes = [];
                    var vDataValidGenomes = [];

                    var ctxValidGenomes = document.getElementById("chartValidGenomes");
                    var chartValidGenomes = new Chart(ctxValidGenomes, {
                        type: 'line',
                        data: {
                            labels: vLabelsValidGenomes,
                            datasets: [{
                                label: 'valid genomes',
                                data: vDataValidGenomes,
                                borderColor: "#F44336",
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    display: true,
                                    ticks: {
                                        suggestedMin: 0,    // minimum will be 0, unless there is a lower value.
                                        suggestedMax: 1     // maximum will be 1, unless there is a higher value.
                                    }
                                }]
                            }
                        }
                    });

                    $(function () {
                        setInterval(function () {
                            $.getJSON("/api/analytics/validgenomes/".concat(vDataValidGenomes.length), function (data) {
                                if (data.length > 0) {
                                    data.forEach(function (item) { vLabelsValidGenomes.push(vLabelsValidGenomes.length); vDataValidGenomes.push(item); });
                                    chartValidGenomes.update();
                                }
                            });
                        }, reloadInterval);
                    });
                </script>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h2>Fitness Developement</h2>
                <canvas id="chartFitness" width="400" height="400"></canvas>
                <script>
                    var vLabelsFitness = [];
                    var vMaxDataFitness = [];
                    var vMinDataFitness = [];
                    var vAvgDataFitness = [];

                    var ctxFitness = document.getElementById("chartFitness");
                    var chartFitness = new Chart(ctxFitness, {
                        type: 'line',
                        data: {
                            labels: vLabelsFitness,
                            datasets: [{
                                label: 'max fitness',
                                data: vMaxDataFitness,
                                borderColor: "#5cb85c",
                                borderWidth: 1
                            }, {
                                label: 'min fitness',
                                data: vMinDataFitness,
                                borderColor: "#5cb85c",
                                borderWidth: 1
                            }, {
                                label: 'avg fitness',
                                data: vAvgDataFitness,
                                borderColor: "#5cb85c",
                                borderWidth: 1
                            }]
                        },
                        options: {
                        }
                    });

                    $(function () {
                        setInterval(function () {
                            $.getJSON("/api/analytics/fitness/".concat(vMaxDataFitness.length), function (data) {
                                if (data["avg"].length > 0) {
                                    data["avg"].forEach(function (item) { vLabelsFitness.push(vLabelsFitness.length); vAvgDataFitness.push(item); });
                                    data["min"].forEach(function (item) { vMinDataFitness.push(item); });
                                    data["max"].forEach(function (item) { vMaxDataFitness.push(item); });
                                    chartFitness.update();
                                }
                            });
                        }, reloadInterval);
                    });
                </script>
            </div>
            <div class="col-md-6">
                <h2>Console</h2>
            </div>
        </div>
    </div>
    <div id="tabData" class="tab-pane active in fade">
        <div class="row">
            <div class="col-md-6">
                <h3>Activities</h3>
                <table id="tableActivities" class="table table-hover">
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Description</td>
                            <td>Cashflow</td>
                            <td>Variance</td>
                            <td><a href="#modalActivity" data-toggle="modal"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a></td>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="modalActivity" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formDataActivity" }))
                            {
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Create Activity</h4>
                            </div>
                            <div class="modal-body">
                                @Html.AntiForgeryToken()

                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="control-label col-md-6" for="name">Name</label>
                                        <div class="col-md-4">
                                            <input id="Name" class="form-control" type="text" required="required" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-6" for="Description">Description</label>
                                        <div class="col-md-4">
                                            <input id="Description" class="form-control" type="text" required="required" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-6" for="Cashflow">Cashflow</label>
                                        <div class="col-md-4">
                                            <input id="Cashflow" class="form-control" type="number" required="required" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-6" for="Variance">Variance</label>
                                        <div class="col-md-4">
                                            <input id="Variance" class="form-control" type="number" pattern="\d+(.\d{2})?" required="required" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <input type="submit" id="submitFormDataActivity" class="btn btn-success" value="Create" />
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                            <script>
                                    $(function () {
                                        $('#formDataActivity').submit(function () {
                                            if ($(this).valid()) {

                                                var model = new Object();
                                                model.Name = $('#Name').val();
                                                model.Description = $('#Description').val();
                                                model.Cashflow = $('#Cashflow').val();
                                                model.Variance = $('#Variance').val();

                                                $.ajax({
                                                    url: "/api/activities",
                                                    type: "POST",
                                                    data: model,
                                                    success: function () {
                                                        $("#modalActivity").modal("hide");
                                                        $('#formDataActivity').trigger("reset");
                                                    },
                                                    error: function (data) {
                                                        $("#resultAlgorithmSettings").html("<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>");
                                                    }
                                                })

                                            }

                                            return false;
                                        });
                                    });
                            </script>
                            }
                        </div>

                    </div>
                </div>
                <script>

                    $(function () {
                        setInterval(function () {
                            $.getJSON({
                                url: '/api/activities',
                                type: "GET",
                                success: function (data) {
                                    if (data == null || data.length == 0 || data[0] == null) {
                                        return;
                                    }

                                    $('#tableActivities tbody').empty();

                                    data.forEach(function (item) {
                                        $('#tableActivities tbody')
                                        var s = '<tr id="\'' + item.id + '\'"><td>';
                                        s += item.name;
                                        s += '</td><td>';
                                        s += item.description;
                                        s += '</td><td>';
                                        s += item.cashflow;
                                        s += '</td><td>';
                                        s += item.variance;
                                        s += '</td><td>';
                                        s += '<a href="javascript:dataDeleteActivity(\'';
                                        s += item.id;
                                        s += '\')"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>';
                                        s += '</td></tr>';

                                        $('#tableActivities tbody').append(s);
                                    })
                                }
                            });
                        }, reloadInterval); // every 3 sec
                    });

                    function dataDeleteActivity(id) {
                        $.ajax({
                            url: "/api/activities/" + id,
                            type: "DELETE",
                            success: function (data) {
                                // TODO
                            },
                            error: function (data) {
                                // TODO
                            }
                        });
                    }
                </script>
            </div>
            <div class="col-md-6">
                <h3>Objects</h3>
                <table id="tableObjects" class="table table-hover">
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Description</td>
                            <td>Type</td>
                            <td>Process Input</td>
                            <td>Process Output</td>
                            <td>Price</td>
                            <td><a href="#modalObjects" data-toggle="modal"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a></td>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="modalObject" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formDataObject" }))
                            {
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Create Object</h4>
                                </div>
                                <div class="modal-body">
                                    @Html.AntiForgeryToken()

                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="control-label col-md-6" for="ObjectName">Name</label>
                                            <div class="col-md-4">
                                                <input id="ObjectName" class="form-control" type="text" required="required" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-6" for="ObjectDescription">Description</label>
                                            <div class="col-md-4">
                                                <input id="ObjectDescription" class="form-control" type="text" required="required" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-6" for="Type">Type</label>
                                            <div class="col-md-4">
                                                <input id="Type" class="form-control" type="text" required="required" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-6" for="ProcessInput">Process Input</label>
                                            <div class="col-md-4">
                                                <input id="ProcessInput" class="form-control" type="text" required="required" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-6" for="ProcessOutput">Process Output</label>
                                            <div class="col-md-4">
                                                <input id="ProcessOutput" class="form-control" type="text" required="required" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-6" for="Price">Price</label>
                                            <div class="col-md-4">
                                                <input id="Price" class="form-control" type="number" required="required" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <input type="submit" id="submitFormDataActivity" class="btn btn-success" value="Create" />
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                                <script>
                                    $(function () {
                                        $('#formDataObject').submit(function () {
                                            if ($(this).valid()) {

                                                var model = new Object();
                                                model.name = $('#ObjectName').val();
                                                model.description = $('#ObjectDescription').val();
                                                model.type = $('#Type').val();
                                                model.processInput = $('#ProcessInput').val();
                                                model.processOutput = $('#ProcessOutput').val();
                                                model.price = $('#Price').val();

                                                $.ajax({
                                                    url: "/api/objects",
                                                    type: "POST",
                                                    data: model,
                                                    success: function () {
                                                        $("#modalObject").modal("hide");
                                                        $('#formDataObject').trigger("reset");
                                                    },
                                                    error: function (data) {
                                                        // TODO
                                                    }
                                                })

                                            }

                                            return false;
                                        });
                                    });
                                </script>
                            }
                        </div>

                    </div>
                </div>
                <script>

                    $(function () {
                        setInterval(function () {
                            $.getJSON({
                                url: '/api/objects',
                                type: "GET",
                                success: function (data) {
                                    if (data == null || data.length == 0 || data[0] == null) {
                                        return;
                                    }

                                    $('#tableObjects tbody').empty();

                                    data.forEach(function (item) {
                                        $('#tableObjects tbody')
                                        var s = '<tr id="\'' + item.id + '\'"><td>';
                                        s += item.name;
                                        s += '</td><td>';
                                        s += item.description;
                                        s += '</td><td>';
                                        s += item.type;
                                        s += '</td><td>';
                                        s += item.processInput;
                                        s += '</td><td>';
                                        s += item.processOutput;
                                        s += '</td><td>';
                                        s += item.price;
                                        s += '</td><td>';
                                        s += '<a href="javascript:dataDeleteObject(\'';
                                        s += item.id;
                                        s += '\')"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>';
                                        s += '</td></tr>';

                                        $('#tableObjects tbody').append(s);
                                    })
                                }
                            });
                        }, reloadInterval); // every 3 sec
                    });

                    function dataDeleteObject(id) {
                        $.ajax({
                            url: "/api/objects/" + id,
                            type: "DELETE",
                            success: function (data) {
                                // TODO
                            },
                            error: function (data) {
                                // TODO
                            }
                        });
                    }
                </script>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h3>Activity Input</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <td>Activity Name</td>
                            <td>o1</td>
                            <td>o2</td>
                            <td>o3</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>a1</td>
                            <td>true</td>
                            <td>false</td>
                            <td>false</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6">
                <h3>Activity Output</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <td>Activity Name</td>
                            <td>o1</td>
                            <td>o2</td>
                            <td>o3</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>a1</td>
                            <td>true</td>
                            <td>true</td>
                            <td>false</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h3>Activit Attribute</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <td>Id</td>
                            <td>Value</td>
                            <td>Percentage</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>1</td>
                            <td>5%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6">
                <h3>Covering Activities</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <td>Activity Name</td>
                            <td>1-1</td>
                            <td>1-2</td>
                            <td>1-3</td>
                            <td>1-4</td>
                            <td>1-5</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>a1</td>
                            <td>true</td>
                            <td>true</td>
                            <td>true</td>
                            <td>true</td>
                            <td>true</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>